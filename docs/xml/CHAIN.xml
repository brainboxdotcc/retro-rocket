<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.14.0" xml:lang="en-US">
  <compounddef id="CHAIN" kind="page">
    <compoundname>CHAIN</compoundname>
    <title>CHAIN Keyword</title>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
<para><programlisting filename=".basic"><codeline><highlight class="normal">CHAIN<sp/>string-expression[,boolean-expression]</highlight></codeline>
</programlisting></para>
<para>Starts a new BASIC program, pausing the current program until the new one finishes. <linebreak/>
 The string expression must evaluate to the <bold>filename</bold> of a program accessible from the filesystem.</para>
<para><itemizedlist>
<listitem><para>Any variables marked as <ref refid="GLOBAL" kindref="compound">GLOBAL</ref> will be shared with the child program.</para>
</listitem><listitem><para>When the chained program terminates, control returns to the line immediately following the <computeroutput>CHAIN</computeroutput> statement in the calling program. <linebreak/>
</para>
</listitem><listitem><para>Variables not marked as global are not visible to the chained program.</para>
</listitem><listitem><para>If the optional boolean expression is included and evaluates to true, the program will be launched as a task in the background and the caller will resume immediately.</para>
</listitem></itemizedlist>
</para>
<para><simplesect kind="remark"><para><computeroutput>CHAIN</computeroutput> resolves relative paths from the <bold>current working directory</bold>. </para>
</simplesect>
<simplesect kind="remark"><para>Use absolute paths (e.g. <computeroutput>/programs/login</computeroutput>) if you don’t want this to depend on <computeroutput>CHDIR</computeroutput>.</para>
</simplesect>
<hruler/>
</para>
<sect1 id="CHAIN_1example-2_1s1"><sect2 id="CHAIN_1example-2_1s2"><sect3 id="CHAIN_1example-2_1s3"><sect4 id="CHAIN_1example-2_1s4"><sect5 id="CHAIN_1example-2">
<title>Example</title><para><programlisting filename=".basic"><codeline><highlight class="normal">PRINT<sp/>&quot;Before<sp/>chain&quot;</highlight></codeline>
<codeline><highlight class="normal">GLOBAL<sp/>X<sp/>=<sp/>42</highlight></codeline>
<codeline><highlight class="normal">CHAIN<sp/>&quot;childprog&quot;</highlight></codeline>
<codeline><highlight class="normal">PRINT<sp/>&quot;Back<sp/>again,<sp/>X<sp/>=<sp/>&quot;;<sp/>X</highlight></codeline>
</programlisting></para>
<para>If <computeroutput>childprog</computeroutput> uses the global variable <computeroutput>X</computeroutput>, it will see the value <computeroutput>42</computeroutput>. <linebreak/>
 After <computeroutput>childprog</computeroutput> ends, execution resumes.</para>
<para><hruler/>
</para>
</sect5></sect4></sect3></sect2></sect1>
<sect1 id="CHAIN_1notes-126_1s1"><sect2 id="CHAIN_1notes-126_1s2"><sect3 id="CHAIN_1notes-126_1s3"><sect4 id="CHAIN_1notes-126_1s4"><sect5 id="CHAIN_1notes-126">
<title>Notes</title><para><itemizedlist>
<listitem><para>Chained programs run in a <bold>new interpreter instance</bold> within a new process. The parent remains suspended until the child exits, unless the child is launched as a background task.</para>
</listitem><listitem><para>A chained program may itself issue <computeroutput>CHAIN</computeroutput> statements, nesting as required. <linebreak/>
</para>
</listitem><listitem><para>If the file specified in <computeroutput>string-expression</computeroutput> cannot be found, an error is raised (and can be caught with <ulink url="https://github.com/brainboxdotcc/retro-rocket/wiki/ONERROR"><computeroutput>ON ERROR</computeroutput></ulink>). <linebreak/>
</para>
</listitem><listitem><para>Unlike BBC BASIC, Retro Rocket’s <computeroutput>CHAIN</computeroutput> does <bold>not</bold> discard the caller - the parent program continues afterwards.</para>
</listitem></itemizedlist>
</para>
<para><bold>See also:</bold> <ref refid="GLOBAL" kindref="compound">GLOBAL</ref>, <ref refid="LIBRARY" kindref="compound">LIBRARY</ref> </para>
</sect5></sect4></sect3></sect2></sect1>
    </detaileddescription>
    <location file="docpages/basic-language-reference/keywords/CHAIN.md"/>
  </compounddef>
</doxygen>
